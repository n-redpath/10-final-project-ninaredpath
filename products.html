<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="header">
        <!-- logo = home-->
        <a href="index.html"><img src="photos/cow2.png" alt="logo"></a>

        <br><br>

        <!-- About us = further down on Home-->
        <a href="index.html">About Us</a>

        <!-- Programs and Events -->
        <a href="programs.html">Programs and Events</a>


        <!-- Products -->
        <a href="products.html">Shop</a>
    </div>
    <br>
    <br>
    <br><br><br><br>
    <!-- images gallery of products -->
    <div>
        <!-- maple syrup, beef, honey -->
        <div class="row">
            <div class="col odd">
                <img class="product-image" src="photos/syrup.jpg" alt="syrup">
            </div>
            <div class="col even">
                <img class="product-image" src="photos/pear.jpg" alt="syrup">
            </div>
            <div class="col odd">
                <img class ="product-image" src="photos/honey.png" alt="">
            </div>
        </div> 

        <!-- apples, pears, peaches -->
        <div class="row">
            <div class="col even">
                <img class= "product-image" src="photos/apples.png" alt="apples">
            </div>
            <div class="col odd"> <img class="product-image" src="photos/beef.jpg" alt=""></div>
            <div class="col even"><img class = "product-image" src="photos/peaches.jpg" alt="peaches"></div>
        </div>
    </div>

    <div class="about-us">
        <h4>Our Products</h4>

        <p>We aim for the purest quality in our products, our attitude, 
            and your experience. All of our natural, ethical and organic 
            products meet the highest standards of excellence and sustainability. </p>

      <p>Our syrup has found its way to 20 U.S. states, as well as the capital. It has also been 
          sent as far as Japan, Hong Kong, Belgium, the Netherlands, Switzerland, the United Kingdom, 
          Saudi Arabia, and Republic of Georgia.
        </p>

        <p>Where will you send yours?</p>
        <br>
    </div>

       <!-- API GAME BANNER -->
    <div class="container">
        <div class="row">
            <div class="col" id="pic-2">
                <br><br><br>
            </div>
        </div>
        <br>
    </div>
<!-- the following text is my own words -->
    <div class="about-us">
        <h4>Find a recipe!</h4>
        <p>Can't decide what to make with one of our products? Use our recipe finder below!</p>
        <br>
        <p>Pick a product:</p>
        <!-- the following is from bootstrap -->
        <div class="btn-group">
            <button class="btn btn-secondary btn-lg dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="drop">
              Products
            </button>
            <div class="dropdown-menu">
                <a class="dropdown-item" id = "syrup">Maple Syrup</a>
                <a class="dropdown-item" id = "beef">Grass Fed Beef</a>
                <a class="dropdown-item" id = "honey">Raw Honey</a>
                <a class="dropdown-item" id="apples">Apples</a>
                <a class="dropdown-item" id="pears">Pears</a>
                <a class="dropdown-item" id="peaches">Peaches</a>
            </div>
          </div>
          <br><br>
          <h4 id = "product-update">Product Chosen: </h4>
          <br>
    </div>


    <div id="recipe">
        <hr>
        <h5 id="title"></h5>
        <img src="" alt="picture" id="recipePic">
        <ul id="ingredients">

        </ul>

        <a href="" id="link">Learn More</a>


        <br><br><br><br><br><br>
        <hr>
        <br>
    </div>




 
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script>   
document.getElementById("syrup").addEventListener("click", function () {changeProduct("syrup")}, false) 
document.getElementById("beef").addEventListener("click", function () {changeProduct("beef")}, false) 
document.getElementById("honey").addEventListener("click", function () {changeProduct("honey")}, false) 
document.getElementById("apples").addEventListener("click", function () {changeProduct("apples")}, false) 
document.getElementById("pears").addEventListener("click", function () {changeProduct("pears")}, false) 
document.getElementById("peaches").addEventListener("click", function () {changeProduct("peaches")}, false) 




function changeProduct(product){
    document.getElementById("product-update").innerHTML = "Product Chosen: " + product
    getRecipe(product)
}

function getRecipe(product){
    console.log("getting here")
    var recipes = []
    var request = new XMLHttpRequest();
    // change to on ready state ? 

    request.onreadystatechange = function () {
        console.log(this.readyState)
        if (this.readyState == 4 & this.status == 200){
            recipes = JSON.parse(this.responseText);
            console.log(recipes)
            console.log("number of results: "+ recipes.hits.length)
            // get a random number
            var randomNum = parseInt(Math.random()*recipes.hits.length)
            console.log(randomNum)
            document.getElementById("title").innerHTML = recipes.hits[randomNum].recipe.label

            document.getElementById("recipePic").src = recipes.hits[randomNum].recipe.image
            document.getElementById("recipePic").style.display = "block"


            for (var i=0; i<recipes.hits[randomNum].recipe.ingredientLines.length; i++){
                var ing = document.createElement("li")
                ing.innerHTML = recipes.hits[randomNum].recipe.ingredientLines[i]
                document.getElementById("ingredients").appendChild(ing)
                document.getElementById("link").href = recipes.hits[randomNum].recipe.shareAs
                document.getElementById("link").style.display = "inline"
            }
            
        }
        else {
            console.log("not found");
        }
        
    }

    var applicationID = "8fb9ce35";
    var applicationKey = "733ad07ac699fca7d58c7abcc02bfb0b";
    curl = "https://api.edamam.com/search?q=" + product + "&app_id=" + applicationID + "&app_key=" + applicationKey
    request.open("GET", curl, true);
    request.send();

}


</script>

</body>
</html>